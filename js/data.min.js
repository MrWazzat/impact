/*!
 * Start Bootstrap - ML CO2 Impact v5.0.8 ()
 * Copyright 2013-2020 
 * Licensed under MIT (https://github.com/BlackrockDigital/ml-co2-impact/blob/master/LICENSE)
 */

"use strict";function asyncGeneratorStep(r,t,e,a,n,o,u){try{var c=r[o](u),s=c.value}catch(r){return void e(r)}c.done?t(s):Promise.resolve(s).then(a,n)}function _asyncToGenerator(c){return function(){var r=this,u=arguments;return new Promise(function(t,e){var a=c.apply(r,u);function n(r){asyncGeneratorStep(a,t,e,n,o,"next",r)}function o(r){asyncGeneratorStep(a,t,e,n,o,"throw",r)}n(void 0)})}}function _createForOfIteratorHelper(r,t){var e;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(e=_unsupportedIterableToArray(r))||t&&r&&"number"==typeof r.length){e&&(r=e);var a=0,n=function(){};return{s:n,n:function(){return a>=r.length?{done:!0}:{done:!1,value:r[a++]}},e:function(r){throw r},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){e=r[Symbol.iterator]()},n:function(){var r=e.next();return u=r.done,r},e:function(r){c=!0,o=r},f:function(){try{u||null==e.return||e.return()}finally{if(c)throw o}}}}function _unsupportedIterableToArray(r,t){if(r){if("string"==typeof r)return _arrayLikeToArray(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(r,t):void 0}}function _arrayLikeToArray(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,a=new Array(t);e<t;e++)a[e]=r[e];return a}var dev_base_data_url="https://raw.githubusercontent.com/mlco2/impact/master/data/",prod_base_data_url="https://raw.githubusercontent.com/mlco2/impact/master/data/",serveFrom="dev",parseProvidersData=function(r){var t,e={},a=_createForOfIteratorHelper(r);try{for(a.s();!(t=a.n()).done;){var n=t.value,o=n.provider,u=n.region,c=n.country,s=n.state,i=n.city,p=n.source,l=n.comment,v=n.providerName,f=n.offsetRatio,y=parseInt(n.impact,10),d=n.regionName;d||(d=u),o in e||(e[o]={__min:{impact:1e4,region:""}}),y<e[o].__min.impact&&(e[o].__min={region:u,impact:y}),e[o][u]={regionName:d,country:c,state:s,city:i,source:p,comment:l,providerName:v,offsetRatio:f,impact:parseFloat(y)}}}catch(r){a.e(r)}finally{a.f()}return e},parseGPUData=function(r){var t,e={},a=1e6,n=_createForOfIteratorHelper(r);try{for(n.s();!(t=n.n()).done;){var o=t.value,u=o.name,c=o.watt;e[u]={watt:parseFloat(c)},parseFloat(c)<a&&(a=parseFloat(c))}}catch(r){n.e(r)}finally{n.f()}return e};function getProvidersData(){return _getProvidersData.apply(this,arguments)}function _getProvidersData(){return(_getProvidersData=_asyncToGenerator(regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,$.ajax({type:"GET",url:prod_base_data_url+"impact.csv",dataType:"text"});case 3:return t=r.sent,serveFrom="prod",r.abrupt("return",t);case 8:return r.prev=8,r.t0=r.catch(0),r.prev=10,r.next=13,$.ajax({type:"GET",url:dev_base_data_url+"impact.csv",dataType:"text"});case 13:return t=r.sent,r.abrupt("return",t);case 17:r.prev=17,r.t1=r.catch(10),console.log("Error getting providers:"),console.error(r.t1);case 21:case"end":return r.stop()}},r,null,[[0,8],[10,17]])}))).apply(this,arguments)}function getGPUData(){return _getGPUData.apply(this,arguments)}function _getGPUData(){return(_getGPUData=_asyncToGenerator(regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,$.ajax({type:"GET",url:prod_base_data_url+"gpus.csv",dataType:"text"});case 3:return t=r.sent,r.abrupt("return",t);case 7:return r.prev=7,r.t0=r.catch(0),r.prev=9,r.next=12,$.ajax({type:"GET",url:dev_base_data_url+"gpus.csv",dataType:"text"});case 12:return t=r.sent,r.abrupt("return",t);case 16:r.prev=16,r.t1=r.catch(9),console.log("Error getting providers:"),console.error(r.t1);case 20:case"end":return r.stop()}},r,null,[[0,7],[9,16]])}))).apply(this,arguments)}function getData(){return _getData.apply(this,arguments)}function _getData(){return(_getData=_asyncToGenerator(regeneratorRuntime.mark(function r(){var t,e;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,getProvidersData();case 2:return t=r.sent,r.next=5,getGPUData();case 5:return e=r.sent,r.abrupt("return",{providers:parseProvidersData($.csv.toObjects(t)),gpus:parseGPUData($.csv.toObjects(e))});case 7:case"end":return r.stop()}},r)}))).apply(this,arguments)}